<ion-header>
  <ion-navbar>
    <ion-title>比赛纪录</ion-title>
    <ion-buttons end>
      <button ion-button icon-only (click)="addNewMatch()">
            <ion-icon name="add"></ion-icon>
          </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content>
  <h2 style="text-align:center" *ngIf="tournament">{{tournament.name}}</h2>
  <ion-list>
    <ion-item>
      <ion-label>选择赛制</ion-label>
      <ion-select [(ngModel)]="match.gameRule" (ngModelChange)="gameRuleChange($event)">
        <ion-option value="BO1" selected>BO1</ion-option>
        <ion-option value="BO3">BO3</ion-option>
        <ion-option value="BO5">BO5</ion-option>
      </ion-select>
    </ion-item>
    <ion-item>
      <ion-grid>
        <ion-row style="text-align:center; align-items: center">
          <ion-col col-4>
            <img class="head-image" *ngIf="!players[0]" src="assets/img/doubt.png" alt="选手1头像" (click)="selectPlayer(1)">
            <img class="head-image" *ngIf="players[0]" src="{{players[0].headimg}}" alt="选手1头像" (click)="selectPlayer(1)">
            <p *ngIf="players[0]">{{ players[0].nickname }}</p>
            <small *ngIf="players[0]">{{players[0].gamepochPlayerId }}</small>
          </ion-col>
          <ion-col col-4>
            {{match.gameRule}}
          </ion-col>
          <ion-col col-4>
            <img class="head-image" *ngIf="players[1]" src="{{players[1].headimg}}" alt="选手2头像" (click)="selectPlayer(2)">
            <img class="head-image" *ngIf="!players[1]" src="assets/img/doubt.png" alt="选手2头像" (click)="selectPlayer(2)">
            <p *ngIf="players[1]">{{ players[1].nickname }}</p>
            <small *ngIf="players[1]">{{players[1].gamepochPlayerId }}</small>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-item>

    <!-- 显示所有比赛结果 -->
    <ion-item *ngFor="let result of match.results; let i = index">
      <ion-grid>
        <ion-row style="text-align:center; align-items: center">
          <ion-col col-4>
            <div (click)="selectTeam(1, i)">
              <img src="assets/img/nba2k18.jpg" alt="球队图标" style="width: 64px">
              <p *ngIf="result.player1.teamId">{{team1.name}}</p>
              <p *ngIf="!result.player1.teamId">未知球队</p>
            </div>
          </ion-col>
          <ion-col col-4>
            <button ion-button icon-only [disabled]="!team1 || !team2" (click)="onRecordResult()">
              <ion-icon ios="ios-create" md="md-create"></ion-icon>
            </button>
          </ion-col>
          <ion-col col-4>
            <div (click)="selectTeam(2, i)">
              <img src="assets/img/nba2k18.jpg" alt="球队图标" style="width: 64px">
              <p *ngIf="result.player2.teamId">{{team2.name}}</p>
              <p *ngIf="!result.player2.teamId">未知球队</p>
            </div>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-item>
    <!-- 显示比赛结果 -->
  </ion-list>
  <!-- <ion-list>
        <ion-item-group *ngFor="let player of players">
            <ion-item-divider color="primary">选手</ion-item-divider>
            <ion-item-sliding>
                <ion-item>
                    <ion-avatar item-start>
                        <img src="{{player.headimg}}">
                    </ion-avatar>
                    <h2>{{player.nickname}}</h2>
                    <span>{{player.userid}}</span>
                    <button ion-button clear item-end (click)="remove(player)">
                        <ion-icon ios="ios-trash" md="md-trash"></ion-icon>
                    </button>
                </ion-item>
            </ion-item-sliding>
            <ion-item></ion-item>
        </ion-item-group>
    </ion-list> -->
</ion-content>
